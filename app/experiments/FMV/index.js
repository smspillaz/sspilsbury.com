import React from 'react';

import { EmscriptenView } from 'components/EmscriptenView';
import { Audio } from './audio';

const { FMV } = require('../emscripten/fmv');

const DEFAULT_FREQUENCY_DATA = [
  -31.786815643310547,
  -24.396963119506836,
  -23.555490493774414,
  -30.6534366607666,
  -35.729248046875,
  -35.40858459472656,
  -35.491844177246094,
  -39.704010009765625,
  -35.80701446533203,
  -30.105363845825195,
  -28.476564407348633,
  -27.070281982421875,
  -32.26312255859375,
  -42.04859924316406,
  -53.0992317199707,
  -59.320350646972656,
  -56.633018493652344,
  -44.0868034362793,
  -37.22483444213867,
  -38.8526611328125,
  -48.10747528076172,
  -38.08517074584961,
  -36.136470794677734,
  -42.62239456176758,
  -42.12290954589844,
  -43.84580612182617,
  -45.90416717529297,
  -38.710792541503906,
  -38.935733795166016,
  -48.242401123046875,
  -55.17844772338867,
  -45.445716857910156,
  -35.79065704345703,
  -35.04393005371094,
  -43.50410842895508,
  -54.38132858276367,
  -44.87150192260742,
  -44.35935974121094,
  -52.9061164855957,
  -68.75682830810547,
  -66.79503631591797,
  -62.99516296386719,
  -42.66872024536133,
  -33.40943145751953,
  -33.55636978149414,
  -43.27516174316406,
  -57.56756591796875,
  -53.18251037597656,
  -46.53761291503906,
  -47.2623405456543,
  -56.0357666015625,
  -67.32722473144531,
  -64.68649291992188,
  -45.64922332763672,
  -37.1873893737793,
  -37.960208892822266,
  -48.28474426269531,
  -67.969482421875,
  -70.3768081665039,
  -60.385345458984375,
  -53.38783645629883,
  -52.51251220703125,
  -57.45359802246094,
  -54.812721252441406,
  -49.41223907470703,
  -51.95684814453125,
  -59.36848068237305,
  -64.28654479980469,
  -67.1242446899414,
  -71.85391235351562,
  -74.63455200195312,
  -64.73734283447266,
  -55.14549255371094,
  -53.152774810791016,
  -57.23174285888672,
  -59.65985870361328,
  -52.28446960449219,
  -54.08434295654297,
  -64.14875030517578,
  -62.30759048461914,
  -61.75665283203125,
  -64.17900085449219,
  -55.796566009521484,
  -53.17619323730469,
  -51.62999725341797,
  -50.53550720214844,
  -51.5505256652832,
  -46.666725158691406,
  -48.607322692871094,
  -60.39453125,
  -55.82961654663086,
  -49.03951644897461,
  -50.59246063232422,
  -59.791465759277344,
  -70.18917846679688,
  -63.9189453125,
  -54.92473602294922,
  -51.58393859863281,
  -51.677757263183594,
  -54.98971939086914,
  -64.37745666503906,
  -60.73188400268555,
  -63.952796936035156,
  -71.63028717041016,
  -67.87847900390625,
  -64.06170654296875,
  -66.91971588134766,
  -66.1439437866211,
  -54.97681427001953,
  -46.70341110229492,
  -46.98104476928711,
  -54.10908126831055,
  -57.541717529296875,
  -66.88957977294922,
  -73.95429992675781,
  -73.17432403564453,
  -72.22916412353516,
  -73.83570861816406,
  -67.41519927978516,
  -61.24232482910156,
  -59.498748779296875,
  -61.16907501220703,
  -63.71614074707031,
  -61.658668518066406,
  -57.73811340332031,
  -60.04230499267578,
  -69.50868225097656,
  -72.9385986328125,
  -71.28080749511719,
  -66.43521118164062,
  -60.538612365722656,
  -59.60734558105469,
  -62.51220703125,
  -65.47368621826172,
  -67.43497467041016,
  -72.78038024902344,
  -74.3827133178711,
  -68.99889373779297,
  -62.0050048828125,
  -62.62355422973633,
  -70.29241180419922,
  -65.3450698852539,
  -63.65679931640625,
  -61.80210494995117,
  -60.73147201538086,
  -63.97930908203125,
  -66.2344970703125,
  -61.35966491699219,
  -57.50716781616211,
  -61.62580490112305,
  -68.02066802978516,
  -63.37181091308594,
  -57.27775573730469,
  -58.962284088134766,
  -67.4378662109375,
  -70.2041015625,
  -68.3480453491211,
  -65.80410766601562,
  -66.53030395507812,
  -69.4280776977539,
  -72.0323257446289,
  -75.43685913085938,
  -71.4774398803711,
  -64.28799438476562,
  -63.45754623413086,
  -65.38713073730469,
  -63.2744026184082,
  -63.9005126953125,
  -67.19754028320312,
  -66.13099670410156,
  -66.2271728515625,
  -68.96786499023438,
  -75.42923736572266,
  -77.023193359375,
  -76.44497680664062,
  -73.57878112792969,
  -64.40355682373047,
  -58.08429718017578,
  -59.28113555908203,
  -68.26766204833984,
  -69.6230239868164,
  -67.72561645507812,
  -68.48441314697266,
  -68.56468963623047,
  -71.66897583007812,
  -68.2972640991211,
  -65.55577850341797,
  -67.24359130859375,
  -67.04156494140625,
  -63.73893737792969,
  -66.77059173583984,
  -73.54271697998047,
  -74.39459991455078,
  -69.40779876708984,
  -69.8499755859375,
  -64.21665954589844,
  -61.514991760253906,
  -66.32886505126953,
  -74.65165710449219,
  -77.72579193115234,
  -77.50759887695312,
  -75.83997344970703,
  -77.14632415771484,
  -78.5401382446289,
  -67.25961303710938,
  -58.815406799316406,
  -59.30009841918945,
  -66.25396728515625,
  -68.49696350097656,
  -74.6924819946289,
  -80.4544906616211,
  -79.89396667480469,
  -79.7439193725586,
  -76.87532806396484,
  -71.99658203125,
  -67.87702178955078,
  -67.37887573242188,
  -72.87632751464844,
  -73.33817291259766,
  -72.6165542602539,
  -75.16566467285156,
  -79.7328872680664,
  -82.02850341796875,
  -84.05876159667969,
  -84.05905151367188,
  -82.87220001220703,
  -80.33451843261719,
  -78.97779083251953,
  -74.83639526367188,
  -73.13539123535156,
  -75.64757537841797,
  -77.25972747802734,
  -78.81175231933594,
  -79.24305725097656,
  -77.42269897460938,
  -76.03204345703125,
  -74.95286560058594,
  -77.26528930664062,
  -78.42013549804688,
  -78.74138641357422,
  -74.19738006591797,
  -71.65174865722656,
  -74.30365753173828,
  -76.064208984375,
  -69.8744888305664,
  -64.90149688720703,
  -65.63813018798828,
  -74.00823211669922,
  -78.05754852294922,
  -78.44529724121094,
  -79.8997573852539,
  -79.52071380615234,
  -80.71896362304688,
  -81.45220947265625,
  -79.7772216796875,
  -77.37367248535156,
  -78.4700927734375,
  -79.49077606201172,
  -75.95358276367188,
  -77.28260803222656,
  -76.63123321533203,
  -78.05242156982422,
  -81.98780822753906,
  -80.97537231445312,
  -79.14866638183594,
  -76.95950317382812,
  -77.12456512451172,
  -81.76661682128906,
  -84.87040710449219,
  -83.62973022460938,
  -83.59754943847656,
  -80.19920349121094,
  -76.36237335205078,
  -76.48729705810547,
  -76.84187316894531,
  -76.64540100097656,
  -75.50114440917969,
  -72.26228332519531,
  -73.03134155273438,
  -75.48446655273438,
  -78.0325927734375,
  -81.18247985839844,
  -80.0113525390625,
  -78.46588897705078,
  -77.69527435302734,
  -77.93312072753906,
  -77.33941650390625,
  -79.19123077392578,
  -83.71527099609375,
  -86.10615539550781,
  -84.76588439941406,
  -83.69943237304688,
  -79.90811157226562,
  -74.65233612060547,
  -73.63377380371094,
  -74.78376770019531,
  -77.06688690185547,
  -82.6998519897461,
  -86.10901641845703,
  -86.14315032958984,
  -88.5205078125,
  -85.5021743774414,
  -80.78326416015625,
  -79.57759094238281,
  -76.63017272949219,
  -75.77237701416016,
  -79.60612487792969,
  -83.82957458496094,
  -83.20379638671875,
  -74.70375061035156,
  -72.5239486694336,
  -77.25495910644531,
  -82.06138610839844,
  -79.60404968261719,
  -77.15556335449219,
  -78.78679656982422,
  -78.10389709472656,
  -79.59046173095703,
  -82.03329467773438,
  -86.19274139404297,
  -88.45143127441406,
  -90.31838989257812,
  -87.66800689697266,
  -83.6688232421875,
  -82.46436309814453,
  -79.25664520263672,
  -76.54963684082031,
  -78.78624725341797,
  -81.51154327392578,
  -82.01785278320312,
  -82.08850860595703,
  -84.02613830566406,
  -84.70834350585938,
  -82.62686920166016,
  -82.19033813476562,
  -81.45684814453125,
  -71.57469177246094,
  -66.95235443115234,
  -69.82472229003906,
  -76.68057250976562,
  -78.18402099609375,
  -78.69697570800781,
  -76.0541000366211,
  -79.27351379394531,
  -85.1234130859375,
  -87.26258087158203,
  -86.77835083007812,
  -84.83236694335938,
  -83.65723419189453,
  -81.30561828613281,
  -77.57258605957031,
  -79.8515625,
  -84.03357696533203,
  -84.46784973144531,
  -86.20620727539062,
  -84.4307632446289,
  -85.31219482421875,
  -85.57997131347656,
  -83.12867736816406,
  -81.9228286743164,
  -85.05555725097656,
  -84.1041488647461,
  -81.792724609375,
  -80.07842254638672,
  -84.63758850097656,
  -89.98894500732422,
  -88.56939697265625,
  -88.27557373046875,
  -86.85408020019531,
  -86.17591857910156,
  -85.05819702148438,
  -86.71360778808594,
  -87.90695190429688,
  -86.98463439941406,
  -82.55290222167969,
  -81.14195251464844,
  -83.432373046875,
  -89.0367202758789,
  -90.00888061523438,
  -87.30084228515625,
  -84.98562622070312,
  -86.04704284667969,
  -89.2509765625,
  -87.96237182617188,
  -82.48515319824219,
  -80.82917022705078,
  -82.45783996582031,
  -84.50433349609375,
  -85.904541015625,
  -83.66401672363281,
  -81.82189178466797,
  -81.19002532958984,
  -78.85697174072266,
  -80.92547607421875,
  -85.4769515991211,
  -85.90775299072266,
  -84.5597915649414,
  -79.71968841552734,
  -75.05892944335938,
  -76.34945678710938,
  -79.31494140625,
  -80.57928466796875,
  -82.19413757324219,
  -82.4617691040039,
  -83.07526397705078,
  -84.02565002441406,
  -86.30398559570312,
  -87.54154205322266,
  -86.62814331054688,
  -82.033447265625,
  -79.16694641113281,
  -78.95531463623047,
  -79.7476806640625,
  -80.40692138671875,
  -81.39334869384766,
  -86.33737182617188,
  -88.00269317626953,
  -86.0177993774414,
  -87.35393524169922,
  -84.05105590820312,
  -81.40045166015625,
  -82.331787109375,
  -82.00127410888672,
  -82.48617553710938,
  -81.6342544555664,
  -82.52957153320312,
  -84.78877258300781,
  -87.98733520507812,
  -89.709228515625,
  -89.45895385742188,
  -91.03671264648438,
  -95.11337280273438,
  -90.00251007080078,
  -84.80207824707031,
  -79.93762969970703,
  -77.17560577392578,
  -76.97525024414062,
  -82.042724609375,
  -82.89349365234375,
  -86.19056701660156,
  -90.82273864746094,
  -90.0653076171875,
  -88.22261810302734,
  -89.05303955078125,
  -87.5206298828125,
  -82.89210510253906,
  -81.83039855957031,
  -84.11170196533203,
  -87.34613037109375,
  -85.74164581298828,
  -85.58116149902344,
  -86.4832763671875,
  -91.27476501464844,
  -91.51734924316406,
  -92.05804443359375,
  -88.75206756591797,
  -84.00425720214844,
  -83.42974853515625,
  -84.81730651855469,
  -85.42282104492188,
  -86.11524963378906,
  -87.64889526367188,
  -90.23894500732422,
  -92.96011352539062,
  -90.84317016601562,
  -90.51194763183594,
  -91.85943603515625,
  -96.98543548583984,
  -91.63082885742188,
  -87.13597106933594,
  -84.38732147216797,
  -87.23450469970703,
  -89.09048461914062,
  -87.91175079345703,
  -87.15010070800781,
  -88.67877197265625,
  -90.75682830810547,
  -91.81624603271484,
  -93.90956115722656,
  -94.52838897705078,
  -93.57028198242188,
  -89.72955322265625,
  -85.95543670654297,
  -86.01144409179688,
  -85.28530883789062,
  -84.76866912841797,
  -86.79035949707031,
  -90.69633483886719,
  -92.89749908447266,
  -91.81297302246094,
  -92.09220123291016,
  -93.54684448242188,
  -92.46158599853516,
  -91.23063659667969,
  -87.67269897460938,
  -85.47886657714844,
  -86.20594787597656,
  -87.54566192626953,
  -87.19261169433594,
  -87.47742462158203,
  -90.65773010253906,
  -92.01022338867188,
  -92.14346313476562,
  -88.3394775390625,
  -87.05528259277344,
  -86.82136535644531,
  -86.06204986572266,
  -84.41596221923828,
  -86.4462890625,
  -88.20565032958984,
  -86.2148208618164,
  -86.41053771972656,
  -89.57083129882812,
  -92.32838439941406,
  -90.81478118896484,
  -91.39839172363281,
  -94.45245361328125,
  -93.50841522216797,
  -93.03650665283203,
  -91.77496337890625,
  -90.57414245605469,
  -91.64976501464844,
  -91.70830535888672,
  -91.75240325927734,
  -91.41829681396484,
  -94.48536682128906,
  -95.20578002929688,
  -94.44970703125,
  -95.47796630859375,
  -95.34304809570312,
  -95.06477355957031,
  -95.10350036621094,
  -94.76261901855469,
  -90.37179565429688,
  -89.50834655761719,
  -93.407958984375,
  -95.77825927734375,
  -96.76718139648438,
  -94.00419616699219,
  -92.91835021972656,
  -89.86264038085938,
  -86.79977416992188,
  -86.59474182128906,
  -86.65365600585938,
  -86.85031127929688,
  -90.4477310180664,
  -91.83657836914062,
  -93.172607421875,
  -93.49496459960938,
  -90.16412353515625,
  -89.72901916503906,
  -91.31199645996094,
  -91.3175048828125,
  -89.79625701904297,
  -88.47831726074219,
  -89.23246765136719,
  -92.88758850097656,
  -93.39751434326172,
  -92.10044860839844,
  -91.1467056274414,
  -88.77865600585938,
  -89.94182586669922,
  -91.69084167480469,
  -89.95403289794922,
  -88.54440307617188,
  -90.01986694335938,
  -89.9795913696289,
  -89.88384246826172,
  -91.7099609375,
  -91.02841186523438,
  -92.59619903564453,
  -94.33049011230469,
  -93.0503921508789,
  -93.1329345703125,
  -95.78533935546875,
  -97.14562225341797,
  -94.47688293457031,
  -91.60687255859375,
  -88.76964569091797,
  -88.52745056152344,
  -91.66812896728516,
  -96.04164123535156,
  -96.70845031738281,
  -93.59262084960938,
  -93.189453125,
  -94.21680450439453,
  -92.99588012695312,
  -92.59345245361328,
  -93.60881805419922,
  -94.67294311523438,
  -94.05165100097656,
  -94.25423431396484,
  -94.73469543457031,
  -96.75090789794922,
  -98.27235412597656,
  -95.16436767578125,
  -93.8045425415039,
  -90.66246032714844,
  -89.36275482177734,
  -92.2325210571289,
  -93.59874725341797,
  -92.66533660888672,
  -91.24401092529297,
  -92.05636596679688,
  -94.9374008178711,
  -93.50189208984375,
  -92.50210571289062,
  -94.19605255126953,
  -93.18283081054688,
  -93.81346893310547,
  -98.86078643798828,
  -97.93330383300781,
  -97.19222259521484,
  -99.41737365722656,
  -97.94247436523438,
  -98.50961303710938,
  -97.13172149658203,
  -97.36672973632812,
  -97.65859985351562,
  -95.4798583984375,
  -96.81340026855469,
  -97.30718994140625,
  -97.40459442138672,
  -99.60453033447266,
  -96.52339935302734,
  -97.40176391601562,
  -96.50141906738281,
  -93.93974304199219,
  -94.28153228759766,
  -96.36514282226562,
  -97.38761901855469,
  -94.40718841552734,
  -93.30244445800781,
  -97.0292739868164,
  -98.63726806640625,
  -99.10115051269531,
  -100.02314758300781,
  -97.96261596679688,
  -99.42283630371094,
  -100.28274536132812,
  -99.22502136230469,
  -101.03167724609375,
  -95.45999145507812,
  -91.79146575927734,
  -91.10260772705078,
  -92.03421783447266,
  -94.99082946777344,
  -98.51042938232422,
  -102.25424194335938,
  -102.90110778808594,
  -103.15744018554688,
  -101.79512023925781,
  -103.46517944335938,
  -104.84821319580078,
  -107.43610382080078,
  -108.1845474243164,
  -109.48711395263672,
  -104.5243911743164,
  -101.54082489013672,
  -103.66499328613281,
  -105.7017822265625,
  -103.81961059570312,
  -103.33690643310547,
  -103.43146514892578,
  -101.09541320800781,
  -100.85501861572266,
  -101.53131103515625,
  -100.03182220458984,
  -97.85403442382812,
  -93.50242614746094,
  -92.66272735595703,
  -95.81985473632812,
  -96.8325424194336,
  -99.06988525390625,
  -100.16664123535156,
  -100.06827545166016,
  -96.92707824707031,
  -95.41769409179688,
  -97.95707702636719,
  -100.20340728759766,
  -97.0090560913086,
  -96.47215270996094,
  -95.99441528320312,
  -95.25808715820312,
  -97.4782485961914,
  -102.00631713867188,
  -100.8695297241211,
  -99.59046173095703,
  -99.94017028808594,
  -100.574462890625,
  -101.3072509765625,
  -104.35992431640625,
  -102.31014251708984,
  -100.87257385253906,
  -100.96207427978516,
  -101.42555236816406,
  -101.96710205078125,
  -103.10176849365234,
  -106.43325805664062,
  -107.50822448730469,
  -103.46432495117188,
  -100.0424575805664,
  -100.1744155883789,
  -100.23336791992188,
  -98.44302368164062,
  -99.33699035644531,
  -99.63125610351562,
  -98.91272735595703,
  -99.80144500732422,
  -100.09253692626953,
  -99.41478729248047,
  -99.56553649902344,
  -102.70903778076172,
  -103.90496826171875,
  -105.01954650878906,
  -99.93525695800781,
  -98.61656188964844,
  -99.36013793945312,
  -99.3818359375,
  -102.2273178100586,
  -109.16361999511719,
  -109.89856719970703,
  -107.9575424194336,
  -108.42665100097656,
  -109.035400390625,
  -106.17864990234375,
  -103.98452758789062,
  -103.9107894897461,
  -105.14012145996094,
  -105.56719970703125,
  -104.75884246826172,
  -102.69194030761719,
  -101.62290954589844,
  -101.974609375,
  -104.88114166259766,
  -101.52894592285156,
  -99.09884643554688,
  -99.94060516357422,
  -104.01449584960938,
  -105.71096801757812,
  -105.05551147460938,
  -105.34648895263672,
  -104.41056060791016,
  -104.7837142944336,
  -108.832275390625,
  -115.87944030761719,
  -122.5316162109375,
  -123.3106689453125,
  -126.16450500488281,
  -126.21669006347656,
  -126.91426086425781,
  -127.68511962890625,
  -129.16677856445312,
  -130.6184539794922,
  -133.0082550048828,
  -136.32566833496094,
  -137.79177856445312,
  -137.76687622070312,
  -140.2613983154297,
  -143.02745056152344,
  -145.30758666992188,
  -145.85311889648438,
  -146.72972106933594,
  -146.8800048828125,
  -143.8131866455078,
  -138.30703735351562,
  -132.8894805908203,
  -134.1097412109375,
  -141.34457397460938,
  -133.55128479003906,
  -132.19580078125,
  -137.19020080566406,
  -141.31668090820312,
  -142.01690673828125,
  -141.0233612060547,
  -138.66197204589844,
  -134.5765838623047,
  -130.81869506835938,
  -128.4335174560547,
  -127.09870910644531,
  -127.31114196777344,
  -127.74504089355469,
  -127.97244262695312,
  -128.3186492919922,
  -129.34860229492188,
  -131.0911407470703,
  -132.73851013183594,
  -135.5728302001953,
  -137.7683868408203,
  -140.3026123046875,
  -144.60873413085938,
  -146.2203826904297,
  -147.1417999267578,
  -148.87953186035156,
  -150.6525115966797,
  -149.61233520507812,
  -150.12112426757812,
  -152.13235473632812,
  -149.7677459716797,
  -145.3627471923828,
  -145.47552490234375,
  -147.45481872558594,
  -149.59446716308594,
  -149.053955078125,
  -145.51480102539062,
  -145.31324768066406,
  -147.84222412109375,
  -146.49929809570312,
  -144.82913208007812,
  -143.66314697265625,
  -141.04689025878906,
  -137.77101135253906,
  -135.97415161132812,
  -135.51885986328125,
  -133.28244018554688,
  -131.37098693847656,
  -129.70384216308594,
  -128.56707763671875,
  -128.01931762695312,
  -127.69226837158203,
  -127.69461822509766,
  -127.96632385253906,
  -129.68121337890625,
  -132.313720703125,
  -135.37916564941406,
  -138.52276611328125,
  -140.35874938964844,
  -139.99391174316406,
  -136.594970703125,
  -131.71572875976562,
  -127.34718322753906,
  -126.6988754272461,
  -128.15478515625,
  -127.62142181396484,
  -126.94029235839844,
  -127.22358703613281,
  -127.90347290039062,
  -128.95132446289062,
  -130.22100830078125,
  -132.37730407714844,
  -133.08706665039062,
  -132.46824645996094,
  -133.40696716308594,
  -133.36761474609375,
  -136.84906005859375,
  -141.3362274169922,
  -143.42294311523438,
  -144.26351928710938,
  -144.089599609375,
  -140.8372802734375,
  -136.52529907226562,
  -133.33905029296875,
  -129.86021423339844,
  -128.43844604492188,
  -128.48548889160156,
  -128.2518768310547,
  -127.93403625488281,
  -128.28793334960938,
  -129.2396240234375,
  -130.40298461914062,
  -132.50466918945312,
  -135.61474609375,
  -138.6317596435547,
  -140.42263793945312,
  -140.89321899414062,
  -140.99598693847656,
  -142.25950622558594,
  -141.5465087890625,
  -139.56312561035156,
  -139.4970703125,
  -141.6187744140625,
  -141.74203491210938,
  -142.71142578125,
  -144.490234375,
  -142.34225463867188,
  -142.89599609375,
  -145.3031005859375,
  -148.78660583496094,
  -147.89413452148438,
  -151.80665588378906,
  -153.01734924316406,
  -154.33399963378906,
  -153.8407745361328,
  -147.9226837158203,
  -140.39239501953125,
  -135.4892578125,
  -138.0194854736328,
  -142.1597442626953,
  -147.49111938476562,
  -155.05978393554688,
  -153.8200225830078,
  -150.51773071289062,
  -148.2162628173828,
  -141.73521423339844,
  -134.21151733398438,
  -134.85838317871094,
  -142.080810546875,
  -137.08621215820312,
  -136.2733917236328,
  -143.451171875,
  -153.4840087890625,
  -152.20181274414062,
  -150.32940673828125,
  -152.49166870117188,
  -150.2267303466797,
  -144.69723510742188,
  -144.23358154296875,
  -146.4584197998047,
  -150.90951538085938,
  -154.8549346923828,
  -155.22647094726562,
  -152.7248077392578,
  -152.76370239257812,
  -150.24771118164062,
  -145.19137573242188,
  -146.33583068847656,
  -149.7769775390625,
  -145.2979736328125,
  -144.096435546875,
  -149.4992218017578,
  -153.8528289794922,
  -154.77224731445312,
  -155.70883178710938,
  -152.52857971191406,
  -153.12060546875,
  -156.00479125976562,
  -150.60061645507812,
  -145.00169372558594,
  -144.42848205566406,
  -146.8844451904297,
  -152.5728302001953,
  -153.94775390625,
  -149.80734252929688,
  -149.500244140625,
  -154.10073852539062,
  -153.0585479736328,
  -150.94326782226562,
  -151.08111572265625,
  -147.9252471923828,
  -141.7085418701172,
  -142.0548095703125,
  -149.5048065185547,
  -153.6807098388672,
  -153.7910614013672,
  -150.1758270263672,
  -151.3002166748047,
  -155.9534912109375,
  -154.36572265625,
  -148.7522735595703,
  -144.14952087402344,
  -144.52749633789062,
  -147.13357543945312,
  -152.3045196533203,
  -146.19387817382812,
  -142.47300720214844,
  -144.7041015625,
  -148.04356384277344,
  -141.20108032226562,
  -133.46864318847656,
  -134.2373809814453,
  -143.58641052246094,
  -147.04522705078125,
  -145.56678771972656,
  -148.16775512695312,
  -147.92677307128906,
  -146.98178100585938,
  -146.75723266601562,
  -149.79673767089844,
  -148.964599609375,
  -143.66221618652344,
  -139.33726501464844,
  -136.60414123535156,
  -141.37094116210938,
  -150.3812255859375,
  -156.36412048339844,
  -154.91702270507812,
  -154.5509033203125,
  -153.1011199951172,
  -149.41278076171875,
  -150.249267578125,
  -147.73052978515625,
  -147.06468200683594,
  -151.8895721435547,
  -153.11819458007812,
  -149.59210205078125,
  -150.7596893310547,
  -151.55860900878906,
  -145.91653442382812,
  -145.93946838378906,
  -152.5994415283203,
  -150.5463104248047,
  -143.65048217773438,
  -144.2460479736328,
  -148.5863494873047,
  -152.59994506835938,
  -154.67279052734375,
  -149.8713836669922,
  -149.57928466796875,
  -153.98321533203125,
  -153.5602264404297,
  -152.73876953125,
  -151.1366424560547,
  -145.75601196289062,
  -146.68504333496094,
  -148.96688842773438,
  -151.9097900390625,
  -151.80252075195312,
  -153.65037536621094,
  -150.6544647216797,
  -151.27908325195312,
  -155.43020629882812,
  -154.36846923828125,
  -150.38540649414062,
  -146.93499755859375,
  -147.92515563964844,
  -148.3416748046875,
  -152.4685821533203,
  -155.4268035888672,
  -153.04934692382812,
  -147.31385803222656,
  -145.05279541015625,
  -141.2440185546875,
  -134.84765625,
  -135.63836669921875,
];

export class FMVView extends React.Component {
  constructor(props) {
    super(props);

    this.audio = null;
  }

  handleDragOver = evt => {
    evt.stopPropagation();
    evt.preventDefault();
    return false;
  };

  handleDrop = evt => {
    evt.stopPropagation();
    evt.preventDefault();

    if (this.audio) {
      return this.audio.dropEvent(evt);
    }

    return false;
  };

  render() {
    return (
      <div
        style={{ width: '100%', height: '100%' }}
        onDrop={this.handleDrop}
        onDragOver={this.handleDragOver}
      >
        <EmscriptenView
          moduleClass={FMV}
          fileMappings={{
            'fmv-emscripten-wrapper.js.mem':
              'https://s3.amazonaws.com/sspilsbury-com-images/emscripten/fmv-emscripten-wrapper.js.mem',
          }}
          onRuntimeInitialized={moduleInstance => {
            this.audio = new Audio(moduleInstance);
            window.setTimeout(() => {
              const freqByteData = new Float32Array(
                this.audio.analyser.frequencyBinCount,
              );
              for (let i = 0; i < DEFAULT_FREQUENCY_DATA.length; i += 1) {
                freqByteData[i] = DEFAULT_FREQUENCY_DATA[i];
              }
              // eslint-disable-next-line
              const buf = moduleInstance._malloc(
                freqByteData.length * freqByteData.BYTES_PER_ELEMENT,
              );
              // eslint-disable-next-line
              moduleInstance.HEAPF32.set(freqByteData, buf >> 2);
              // eslint-disable-next-line
              moduleInstance._set_frequencies(
                buf,
                this.audio.analyser.minDecibels,
                this.audio.analyser.maxDecibels -
                  this.audio.analyser.minDecibels,
              );
              // eslint-disable-next-line
              moduleInstance._free(buf);
            }, 16);
            // eslint-disable-next-line
            moduleInstance._run_fmv_with_frequency_provider(
              1056,
              640,
            );
          }}
          {...this.props}
        />
      </div>
    );
  }
}
